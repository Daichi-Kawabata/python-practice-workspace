# Pythonã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œï¼šã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã®ç†è§£

## ğŸ“š é‡è¦ãªæ¦‚å¿µï¼šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã§èª­ã¾ã‚Œã‚‹

### âŒ ã‚ˆãã‚ã‚‹èª¤è§£
```python
# èª¤è§£ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨å…¨ãƒ‡ãƒ¼ã‚¿ãŒãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¾ã‚Œã‚‹
with open("large_file.csv", 'r') as f:
    # â† ã“ã“ã§å…¨ãƒ‡ãƒ¼ã‚¿ãŒãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ã¨æ€ã„ãŒã¡
    reader = csv.reader(f)
```

### âœ… å®Ÿéš›ã®å‹•ä½œ
```python
# å®Ÿéš›ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿ã¯èª­ã¿è¾¼ã¾ã‚Œãªã„
with open("large_file.csv", 'r') as f:
    # â† ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚’ä½œæˆã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã‚’å…ˆé ­ã«è¨­å®š
    reader = csv.reader(f)
    # â† ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‚’ä½œæˆã€ã¾ã ãƒ‡ãƒ¼ã‚¿ã¯èª­ã¾ã‚Œã¦ã„ãªã„
    
    first_row = next(reader)  # â† ã“ã“ã§åˆã‚ã¦1è¡Œç›®ã‚’èª­ã¿è¾¼ã¿
    second_row = next(reader) # â† ã“ã“ã§2è¡Œç›®ã‚’èª­ã¿è¾¼ã¿
```

## ğŸ” ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

### ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã®æ¦‚å¿µ
```
ãƒ•ã‚¡ã‚¤ãƒ«: employees.csv
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name,age,city,salary            â”‚ â† è¡Œ1ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰
â”‚ ç”°ä¸­,25,æ±äº¬,350000              â”‚ â† è¡Œ2
â”‚ å±±ç”°,30,å¤§é˜ª,450000              â”‚ â† è¡Œ3
â”‚ ä½è—¤,28,åå¤å±‹,400000            â”‚ â† è¡Œ4
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†‘
  ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ï¼ˆç¾åœ¨ä½ç½®ï¼‰
```

### èª­ã¿è¾¼ã¿å‡¦ç†ã®æµã‚Œ
```python
with open("employees.csv", 'r') as f:
    reader = csv.reader(f)
    
    # ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã¯è¡Œ1ã‚’æŒ‡ã—ã¦ã„ã‚‹
    # ãƒ¡ãƒ¢ãƒª: [ ç©º ]
    
    headers = next(reader)
    # ã‚¹ãƒ†ãƒƒãƒ—2: è¡Œ1ã‚’èª­ã¿è¾¼ã¿ã€ãƒã‚¤ãƒ³ã‚¿ãŒè¡Œ2ã«ç§»å‹•
    # ãƒ¡ãƒ¢ãƒª: ['name', 'age', 'city', 'salary']
    
    first_data = next(reader)
    # ã‚¹ãƒ†ãƒƒãƒ—3: è¡Œ2ã‚’èª­ã¿è¾¼ã¿ã€ãƒã‚¤ãƒ³ã‚¿ãŒè¡Œ3ã«ç§»å‹•
    # ãƒ¡ãƒ¢ãƒª: ['ç”°ä¸­', '25', 'æ±äº¬', '350000']
    # æ³¨æ„: headersã®å†…å®¹ã¯å‡¦ç†æ¸ˆã¿ã§å‚ç…§ã•ã‚Œãªã„é™ã‚Šãƒ¡ãƒ¢ãƒªã‹ã‚‰è§£æ”¾ã•ã‚Œã‚‹å¯èƒ½æ€§
```

## ğŸ’¡ csv.reader() ãŒãƒªã‚¹ãƒˆã§ãªã„ç†ç”±

### ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ vs ãƒªã‚¹ãƒˆ
```python
# ãƒªã‚¹ãƒˆï¼ˆå…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿æŒï¼‰
my_list = [1, 2, 3, 4, 5]
print(my_list[0])    # âœ… ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
print(my_list[2])    # âœ… ãƒ©ãƒ³ãƒ€ãƒ ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
print(len(my_list))  # âœ… é•·ã•å–å¾—å¯èƒ½

# ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ï¼ˆå¿…è¦ãªæ™‚ã ã‘ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆï¼‰
my_iter = iter([1, 2, 3, 4, 5])
print(next(my_iter))  # âœ… 1 - é †æ¬¡ã‚¢ã‚¯ã‚»ã‚¹
print(next(my_iter))  # âœ… 2 - æ¬¡ã®è¦ç´ 
# print(my_iter[0])   # âŒ ã‚¨ãƒ©ãƒ¼ï¼ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
# print(len(my_iter)) # âŒ ã‚¨ãƒ©ãƒ¼ï¼é•·ã•ä¸æ˜
```

### csv.reader() ã®ç‰¹å¾´
```python
reader = csv.reader(f)
print(type(reader))  # <class '_csv.reader'>

# âŒ ä½¿ç”¨ä¸å¯èƒ½ãªæ“ä½œ
# reader[0]        # ã‚¨ãƒ©ãƒ¼ï¼šã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
# len(reader)      # ã‚¨ãƒ©ãƒ¼ï¼šé•·ã•å–å¾—
# reader.reverse() # ã‚¨ãƒ©ãƒ¼ï¼šé€†é †

# âœ… ä½¿ç”¨å¯èƒ½ãªæ“ä½œ
next(reader)       # æ¬¡ã®è¡Œã‚’å–å¾—
for row in reader: # é †æ¬¡å‡¦ç†
    pass
```

## ğŸ¯ next() é–¢æ•°ã®å½¹å‰²

### next() ã®åŸºæœ¬å‹•ä½œ
```python
# ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰æ¬¡ã®è¦ç´ ã‚’å–å¾—ã™ã‚‹çµ„ã¿è¾¼ã¿é–¢æ•°
iterator = iter([1, 2, 3])

first = next(iterator)   # 1
second = next(iterator)  # 2
third = next(iterator)   # 3
# fourth = next(iterator) # StopIteration ä¾‹å¤–
```

### CSVèª­ã¿è¾¼ã¿ã§ã® next() æ´»ç”¨
```python
with open("data.csv", 'r') as f:
    reader = csv.reader(f)
    
    # ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’å–å¾—ï¼ˆä¸€èˆ¬çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
    headers = next(reader)
    print(f"ã‚«ãƒ©ãƒ : {headers}")
    
    # æ®‹ã‚Šã®è¡Œã‚’å‡¦ç†
    for row in reader:
        print(f"ãƒ‡ãƒ¼ã‚¿: {row}")
```

### å®‰å…¨ãª next() ã®ä½¿ç”¨
```python
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒ‡å®šã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’å›é¿
headers = next(reader, None)
if headers is None:
    print("ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã§ã™")
else:
    print(f"ãƒ˜ãƒƒãƒ€ãƒ¼: {headers}")

# try-except ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try:
    headers = next(reader)
except StopIteration:
    print("ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã§ã™")
```

## ğŸš€ ãƒ¡ãƒ¢ãƒªåŠ¹ç‡æ€§ã®åˆ©ç‚¹

### å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†
```python
# âŒ éåŠ¹ç‡ï¼šå…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¿
def inefficient_processing(filename):
    with open(filename, 'r') as f:
        all_lines = f.readlines()  # 10GBã®ãƒ•ã‚¡ã‚¤ãƒ« â†’ 10GBã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨
        for line in all_lines:
            process(line)

# âœ… åŠ¹ç‡çš„ï¼š1è¡Œãšã¤å‡¦ç†
def efficient_processing(filename):
    with open(filename, 'r') as f:
        reader = csv.reader(f)
        for row in reader:  # 10GBã®ãƒ•ã‚¡ã‚¤ãƒ« â†’ æ•°KBã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨
            process(row)
```

### å®Ÿç”¨ä¾‹ï¼šæ¡ä»¶æ¤œç´¢ã§ã®æ—©æœŸçµ‚äº†
```python
def find_employee(filename, target_name):
    """æŒ‡å®šã•ã‚ŒãŸåå‰ã®å¾“æ¥­å“¡ã‚’æ¤œç´¢ï¼ˆæ—©æœŸçµ‚äº†ï¼‰"""
    with open(filename, 'r') as f:
        reader = csv.DictReader(f)
        
        for row_num, row in enumerate(reader, 1):
            if row['name'] == target_name:
                print(f"è¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼è¡Œç•ªå·: {row_num}")
                return row
            
            # 100ä¸‡è¡Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚ã€1è¡Œç›®ã§è¦‹ã¤ã‹ã‚Œã°å³åº§ã«çµ‚äº†
            # ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¯å¸¸ã«1è¡Œåˆ†ã®ã¿
        
        print("è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ")
        return None
```

## ğŸ”„ ä»–ã®è¨€èªã¨ã®æ¯”è¼ƒ

### Pythonï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ï¼‰
```python
# ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„
with open("data.csv", 'r') as f:
    reader = csv.reader(f)
    for row in reader:  # 1è¡Œãšã¤å‡¦ç†
        process(row)
```

### Goï¼ˆä¸€æ‹¬èª­ã¿è¾¼ã¿ãŒä¸€èˆ¬çš„ï¼‰
```go
// å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åº¦ã«èª­ã¿è¾¼ã¿
reader := csv.NewReader(file)
records, err := reader.ReadAll()  // å…¨è¡Œã‚’ãƒ¡ãƒ¢ãƒªã«èª­ã¿è¾¼ã¿
if err != nil {
    // ã‚¨ãƒ©ãƒ¼å‡¦ç†
}
for _, record := range records {
    process(record)
}
```

### Rubyï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã‚‚å¯èƒ½ï¼‰
```ruby
# 1è¡Œãšã¤å‡¦ç†
CSV.foreach("data.csv") do |row|
  process(row)  # 1è¡Œãšã¤å‡¦ç†
end
```

## ğŸ“‹ ã¾ã¨ã‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ
1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³ â‰  ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿**
   - `open()` ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘
   - ãƒ‡ãƒ¼ã‚¿ã¯ `next()` ã‚„ `for` ã§å¿…è¦ãªæ™‚ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹

2. **csv.reader() ã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿**
   - ãƒªã‚¹ãƒˆã§ã¯ãªã„ã®ã§ `[0]` ã§ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯
   - `next()` ã§é †æ¬¡ã‚¢ã‚¯ã‚»ã‚¹

3. **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡æ€§**
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã«é–¢ä¿‚ãªãä¸€å®šã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
   - å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã«æœ€é©

4. **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã®åˆ©ç‚¹**
   - æ—©æœŸçµ‚äº†ãŒå¯èƒ½
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒäºˆæ¸¬å¯èƒ½
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ã«é©ã—ã¦ã„ã‚‹

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```python
# æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
with open("data.csv", 'r') as f:
    reader = csv.DictReader(f)
    
    for row in reader:
        # 1è¡Œãšã¤å‡¦ç†
        process_row(row)
        
        # å¿…è¦ã«å¿œã˜ã¦æ—©æœŸçµ‚äº†
        if some_condition:
            break
```

ã“ã®ç†è§£ãŒã‚ã‚Œã°ã€å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚‚åŠ¹ç‡çš„ã«è¡Œãˆã¾ã™ï¼
