#!/usr/bin/env python3
"""
ãƒ–ãƒ­ã‚°ç®¡ç†CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - æ¼”ç¿’èª²é¡Œ

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ä»¥ä¸‹ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ï¼š
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚«ãƒ†ã‚´ãƒªã€è¨˜äº‹ã®ç®¡ç†æ©Ÿèƒ½
- å…¥åŠ›æ¤œè¨¼ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

å®Ÿè£…ã®ãƒ’ãƒ³ãƒˆ:
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (blog_cli_template.py) ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„
- æ®µéšçš„ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã£ã¦ãã ã•ã„
- æœ€åˆã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™
"""

import argparse
import sys
from typing import Optional, List
from datetime import datetime

# çµ¶å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤‰æ›´
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from database import init_database
from crud_operations import UserCRUD, CategoryCRUD, PostCRUD
from models import User, Category, Post, Tag


class BlogCLI:
    """ãƒ–ãƒ­ã‚°ç®¡ç†CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"""
    
    def __init__(self):
        """CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–"""
        print("ğŸš€ ãƒ–ãƒ­ã‚°ç®¡ç†CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³")
        print("=" * 40)
        
        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
        init_database()
    
    def show_main_menu(self) -> None:
        """
        ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠè‚¢ã®è¡¨ç¤º
        - é©åˆ‡ãªç•ªå·ä»˜ã‘
        - çµ‚äº†ã‚ªãƒ—ã‚·ãƒ§ãƒ³
        """
        print("\\nğŸ“‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼:")
        # TODO: ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        # ä¾‹: 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†, 2. ã‚«ãƒ†ã‚´ãƒªç®¡ç†, 3. è¨˜äº‹ç®¡ç†, etc.
        pass
    
    def run_interactive(self) -> None:
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¡¨ç¤ºã¨é¸æŠã®å—ä»˜
        - å„æ©Ÿèƒ½ã¸ã®åˆ†å²å‡¦ç†
        - ç¶™ç¶š/çµ‚äº†ã®åˆ¶å¾¡
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        # ãƒ’ãƒ³ãƒˆ: while ãƒ«ãƒ¼ãƒ—ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ç¹°ã‚Šè¿”ã—è¡¨ç¤º
        pass
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½
    def user_management_menu(self) -> None:
        """
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def create_user_interactive(self) -> None:
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ãƒ¡ãƒ¼ãƒ«ã€è¡¨ç¤ºåã®å…¥åŠ›å—ä»˜
        - å…¥åŠ›æ¤œè¨¼ï¼ˆç©ºæ–‡å­—ãƒã‚§ãƒƒã‚¯ã€ãƒ¡ãƒ¼ãƒ«å½¢å¼ãªã©ï¼‰
        - ä½œæˆçµæœã®è¡¨ç¤º
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def list_users(self) -> None:
        """
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    # ã‚«ãƒ†ã‚´ãƒªç®¡ç†æ©Ÿèƒ½
    def category_management_menu(self) -> None:
        """
        ã‚«ãƒ†ã‚´ãƒªç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def create_category_interactive(self) -> None:
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ãƒ†ã‚´ãƒªä½œæˆ
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def list_categories(self) -> None:
        """
        ã‚«ãƒ†ã‚´ãƒªä¸€è¦§è¡¨ç¤º
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    # è¨˜äº‹ç®¡ç†æ©Ÿèƒ½
    def post_management_menu(self) -> None:
        """
        è¨˜äº‹ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def create_post_interactive(self) -> None:
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¨˜äº‹ä½œæˆ
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¹ãƒ©ãƒƒã‚°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç­‰ã®å…¥åŠ›
        - è‘—è€…ãƒ»ã‚«ãƒ†ã‚´ãƒªã®é¸æŠ
        - å…¬é–‹/éå…¬é–‹ã®é¸æŠ
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def list_posts(self) -> None:
        """
        è¨˜äº‹ä¸€è¦§è¡¨ç¤º
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    def search_posts_interactive(self) -> None:
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¨˜äº‹æ¤œç´¢
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        pass
    
    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
    def get_user_input(self, prompt: str, required: bool = True) -> str:
        """
        ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å–å¾—
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - é©åˆ‡ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º
        - å¿…é ˆå…¥åŠ›ã®æ¤œè¨¼
        - ç©ºæ–‡å­—ã‚„ã‚¹ãƒšãƒ¼ã‚¹ã®ã¿ã®å…¥åŠ›ã®å‡¦ç†
        
        Args:
            prompt: å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
            required: å¿…é ˆå…¥åŠ›ã‹ã©ã†ã‹
            
        Returns:
            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æ–‡å­—åˆ—
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        return ""
    
    def get_integer_input(self, prompt: str, min_val: int = 0) -> Optional[int]:
        """
        æ•´æ•°å…¥åŠ›ã‚’å–å¾—
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        - æ•°å€¤å¤‰æ›ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
        - ç¯„å›²ãƒã‚§ãƒƒã‚¯
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        return None
    
    def confirm_action(self, message: str) -> bool:
        """
        ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€Y/Nã§å¿œç­”ã‚’å–å¾—
        
        èª²é¡Œ: ã“ã®é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        """
        # TODO: ã“ã“ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
        return False


def main():
    """ãƒ¡ã‚¤ãƒ³é–¢æ•°"""
    parser = argparse.ArgumentParser(description="ãƒ–ãƒ­ã‚°ç®¡ç†CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³")
    parser.add_argument(
        "--interactive", 
        action="store_true", 
        help="ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ"
    )
    
    args = parser.parse_args()
    
    try:
        cli = BlogCLI()
        
        if args.interactive:
            cli.run_interactive()
        else:
            print("ğŸ’¡ --interactive ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¦ãã ã•ã„")
            print("ä¾‹: python blog_cli.py --interactive")
            
    except KeyboardInterrupt:
        print("\\n\\nğŸ‘‹ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¾ã™")
        sys.exit(0)
    except Exception as e:
        print(f"âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        sys.exit(1)


if __name__ == "__main__":
    main()
